<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojox.data.jsonPathStore &mdash; The Dojo Toolkit - Reference Guide</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.10.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>

    <link rel="stylesheet" href="../../../../../css/guide.css">
    <script type="text/javascript">
      dojoConfig = {
        async: true
      };
    </script>
    <script src="../../../scripts/dojo/dojo/dojo.js"></script>
    <script src="../../../../../scripts/guide/docs/guide.js"></script>
    <link rel="stylesheet" href="../../../../../scripts/dojo/dijit/themes/claro/claro.css">

  </head>
  <body role="document">
  

    <div class="document">

  <div class="nav">
	<div class="row">
		<div class="small-3 columns">
			<a href="/" class="navLogo"><span>Dojo</span></a>
		</div>
		<div class="small-9 columns text-right">
			<div class="mobileMenuToggle" data-menu-toggle></div>
			<div class="menu">
				<div class="mobileHeader">Menu</div>
				<ul class="inline-list menuItems right">
					<li><a href="">Get Dojo</a></li>
					<li><a href="/documentation/">Docs</a></li>
					<li><a href="">Help &amp; Support</a></li>
					<li><a href="">Blog</a></li>
					<li><a href="">Get Involved</a></li>
				</ul>
			</div>
		</div>
	</div>
</div>
  <main class="refguide">
    <div class="row">

      <div class="medium-3 columns sideNav">
        <h4>Reference Guide</h4>
        <div id="dtkVersion">
          <label for="refver">Dojo Version</label>
          <select id="refver" name="refver">
            <option value="1.6">1.6</option>
            <option value="1.7">1.7</option>
            <option value="1.8">1.8</option>
            <option value="1.9">1.9</option>
            <option value="1.10" selected="selected">1.10</option>
          </select>
        </div>
        <ul>
          <li><a href="../../index.html">Startpage</a></li>
          <li><a href="../../dojo/index.html">Dojo</a></li>
          <li><a href="../../dijit/index.html">Dijit</a></li>
          <li><a href="../index.html">DojoX</a></li>
        </ul>
        <ul>
<li><a class="reference internal" href="#">dojox.data.jsonPathStore</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#supported-apis">Supported APIs</a><ul>
<li><a class="reference internal" href="#additional-methods">Additional methods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage">Usage</a><ul>
<li><a class="reference internal" href="#constructor-parameters">Constructor Parameters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#programmatic-example">Programmatic example</a></li>
<li><a class="reference internal" href="#declarative-example">Declarative example</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        

            <div id="searchbox" style="display: none">
                <h3>Quick search</h3>
                <form class="search" action="../../search.html" method="get">
                    <input type="text" name="q" size="18" />
                    <input type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                 </form>
                 <p class="searchtip" style="font-size: 90%">
                     Enter search terms or a module, class or function name.
                 </p>
            </div>
      </div>
      <div class="medium-9 columns content">
        
  <div class="section" id="dojox-data-jsonpathstore">
<span id="id1"></span><h1><a class="toc-backref" href="#id2">dojox.data.jsonPathStore</a><a class="headerlink" href="#dojox-data-jsonpathstore" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Authors:</th><td class="field-body">Dustin Machi</td>
</tr>
<tr class="field-even field"><th class="field-name">Developers:</th><td class="field-body">Dustin Machi</td>
</tr>
<tr class="field-odd field"><th class="field-name">since:</th><td class="field-body">V1.0 to 1.3, Removed in 1.4</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#dojox-data-jsonpathstore" id="id2">dojox.data.jsonPathStore</a><ul>
<li><a class="reference internal" href="#introduction" id="id3">Introduction</a></li>
<li><a class="reference internal" href="#supported-apis" id="id4">Supported APIs</a></li>
<li><a class="reference internal" href="#usage" id="id5">Usage</a></li>
<li><a class="reference internal" href="#examples" id="id6">Examples</a></li>
</ul>
</li>
</ul>
</div>
<p>Note: This API was removed for the Dojo 1.4 release. <a class="reference external" href="http://svn.dojotoolkit.org/dojoc/dmachi/data/">http://svn.dojotoolkit.org/dojoc/dmachi/data/</a> contains a JsonStore that is the most suitable replacement for this in Dojo 1.4 and 1.5.</p>
<p>A local (in memory) store which can attach a dojo.data interface to each JavaScript object and uses jsonPath as the query language. It takes an arbitrary JavaScript object as its data structure and attaches to this data structure to present a dojo.data.api interface. Each JavaScript object in the store is an Item in dojo.data parlance.</p>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id3">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>JsonPathStore is intended to allow any Object data structure to easily be accessed and controlled by various widgets. It uses <cite>dojox/jsonPath</cite> as a query language. It is a very lightweight server, yet it is flexible enough to allow you to define a single store maintaining several unrelated data sets in a single store. Furthermore, it implements a synchronous mode which makes manipulation of the store possible when appropriate for an application.</p>
</div>
<div class="section" id="supported-apis">
<h2><a class="toc-backref" href="#id4">Supported APIs</a><a class="headerlink" href="#supported-apis" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><a class="reference internal" href="../../dojo/data/api/Read.html#dojo-data-api-read"><span>dojo.data.api.Read</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="../../dojo/data/api/Identity.html#dojo-data-api-identity"><span>dojo.data.api.Identity</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="../../dojo/data/api/Write.html#dojo-data-api-write"><span>dojo.data.api.Write</span></a></p>
</li>
<li><p class="first"><a class="reference internal" href="../../dojo/data/api/Notification.html#dojo-data-api-notification"><span>dojo.data.api.Notification</span></a></p>
</li>
<li><p class="first">release also includes experimental synchronous API.</p>
<p>All async features remain the same, but since data is local, custom widgets and code can take advantage of these features while still allowing other normal widgets async access. See the mode property in the constructor parameters</p>
</li>
</ul>
<div class="section" id="additional-methods">
<h3>Additional methods<a class="headerlink" href="#additional-methods" title="Permalink to this headline">¶</a></h3>
<p>In addition to the standard store api, the store provides a few additional methods of note:</p>
<ul>
<li><p class="first">setData(data)</p>
<p>Set the store&#8217;s data to the supplied object and then load or setup that data with the required meta info.</p>
</li>
<li><p class="first">cleanMeta(data)</p>
<p>Recurse through the provided data object and remove any meta information that has attached. This method also removes any IDs that were auto generated. IDs provided to the store will not be touched.</p>
</li>
<li><p class="first">dump(options)</p>
<p>Takes a options keyword parameter accepting clone, cleanMeta, and suppressExportMeta Boolean options and an export type option that takes &#8220;raw&#8221; or &#8220;json&#8221; as the parameters.</p>
</li>
</ul>
<p>Two additional notification events are also triggered in this store, onSave() and onRevert() which will each be called after their respective
events have completed.</p>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id5">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">store</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">jsonPathStore</span><span class="p">({</span><span class="nx">url</span><span class="o">:</span> <span class="s2">&quot;/stores/store.js&quot;</span><span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var store = new dojox.data.jsonPathStore({url: &quot;/stores/store.js&quot;});</textarea></div><div class="highlight"><pre><span class="kd">var</span> <span class="nx">store</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">jsonPathStore</span><span class="p">({</span><span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
     <span class="nx">fruits</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="nx">apple</span><span class="p">},</span>
          <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="nx">orange</span><span class="p">}</span>
     <span class="p">],</span>
     <span class="nx">vegetables</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;broccoli&quot;</span><span class="p">}</span>
     <span class="p">]</span>
 <span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var store = new dojox.data.jsonPathStore({data: {
     fruits: [
          {id: 1, type: apple},
          {id: 2, type: orange}
     ],
     vegetables: [
          {id: 3, type: &quot;broccoli&quot;}
     ]
 });</textarea></div><div class="section" id="constructor-parameters">
<h3>Constructor Parameters<a class="headerlink" href="#constructor-parameters" title="Permalink to this headline">¶</a></h3>
<p>The jsonPathStore takes a single optional parameter in the form of a JavaScript object containing one or more of the following properties:</p>
<dl class="docutils">
<dt>data</dt>
<dd>JSON String or JavaScript Object
JSON String or JavaScript object this store will control JSON is converted into an object, and an object passed to the store will be used directly. If no data and no url is provide, an empty object, {}, will be used as the initial store.</dd>
<dt>url - string</dt>
<dd>Load data from this url in JSON format and use the Object created from the data as the data source.</dd>
<dt>indexOnLoad - Boolean</dt>
<dd>Parse the data object and set individual objects up as appropriate. This will add meta data and assign id&#8217;s to objects that don&#8217;t have them as defined by the idAttribute option. Disabling this option will keep this parsing from happening until a query is performed at which time only the top level of an item has meta info stored. This might work in some situations, but you will almost always want to indexOnLoad or use another option which will create an index. Defaults to true.</dd>
<dt>idAttribute - string</dt>
<dd>Defaults to &#8216;_id&#8217;. The name of the attribute that holds an objects id. This can be a preexisting id provided by the server. If an ID isn&#8217;t already provided when an object is fetched or added to the store, the autoIdentity system will generate an id for it and add it to the index. There are utility routines for exporting data from the store that can clean any generated IDs before exporting and leave preexisting id&#8217;s in tact.</dd>
<dt>metaLabel - string</dt>
<dd>Defaults to &#8216;_meta&#8217; overrides the attribute name that is used by the store for attaching meta information to an object while in the store&#8217;s control. Defaults to &#8216;_meta&#8217;.</dd>
<dt>hideMetaAttributes - Boolean</dt>
<dd>Defaults to False. When enabled, calls to getAttributes() will not include the meta attribute.</dd>
<dt>autoIdPrefix: string</dt>
<dd>Defaults to &#8220;_auto_&#8221;. This string is used as the prefix to any objects which have a generated id. A numeric index is appended to this string to complete the ID</dd>
<dt>mode: dojox.data.ASYNC_MODE || dojox.data.SYNC_MODE</dt>
<dd>Defaults to ASYNC_MODE. This option sets the default mode for this store.
Sync calls return their data immediately from the calling function instead of calling the callback functions. Functions such as fetchItemByIdentity() and fetch() both accept a string parameter in addition to the normal keywordArgs parameter. When passed this option, SYNC_MODE will automatically be used even when the default mode of the system is ASYNC_MODE. A normal request to fetch or fetchItemByIdentity (with kwArgs object) can also include a mode property to override this setting for that one request.</dd>
</dl>
</div>
</div>
<div class="section" id="examples">
<h2><a class="toc-backref" href="#id6">Examples</a><a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="programmatic-example">
<h3>Programmatic example<a class="headerlink" href="#programmatic-example" title="Permalink to this headline">¶</a></h3>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">store</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">jsonPathStore</span><span class="p">({</span><span class="nx">data</span><span class="o">:</span> <span class="p">{</span>
     <span class="nx">fruits</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="nx">apple</span><span class="p">},</span>
          <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="nx">orange</span><span class="p">}</span>
     <span class="p">],</span>
     <span class="nx">vegetables</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span><span class="nx">id</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span> <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;broccoli&quot;</span><span class="p">}</span>
     <span class="p">]</span>
 <span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var store = new dojox.data.jsonPathStore({data: {
     fruits: [
          {id: 1, type: apple},
          {id: 2, type: orange}
     ],
     vegetables: [
          {id: 3, type: &quot;broccoli&quot;}
     ]
 });</textarea></div></div>
<div class="section" id="declarative-example">
<h3>Declarative example<a class="headerlink" href="#declarative-example" title="Permalink to this headline">¶</a></h3>
<div class="highlight"><pre><span class="o">&lt;</span><span class="nx">div</span> <span class="nx">data</span><span class="o">-</span><span class="nx">dojo</span><span class="o">-</span><span class="nx">id</span><span class="o">=</span><span class="s2">&quot;store&quot;</span> <span class="nx">data</span><span class="o">-</span><span class="nx">dojo</span><span class="o">-</span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;dojox.data.jsonPathStore&quot;</span> <span class="nx">data</span><span class="o">-</span><span class="nx">dojo</span><span class="o">-</span><span class="nx">props</span><span class="o">=</span><span class="s2">&quot;url:&#39;/path/to/store.js&#39;&quot;</span><span class="o">&gt;&lt;</span><span class="err">/div&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">&lt;div data-dojo-id=&quot;store&quot; data-dojo-type=&quot;dojox.data.jsonPathStore&quot; data-dojo-props=&quot;url:'/path/to/store.js'&quot;&gt;&lt;/div&gt;</textarea></div></div>
</div>
</div>


      </div>
    </div>
      <div class="clearer"></div>
    </div>

  <div class="row">
    <div class="medium-9 columns offset-3">
        <a href="https://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=dFlDcHEyaHMwbEd4MFBObkNrX0E1MFE6MQ&entry_0=http%3A%2F%2Fdojotoolkit.org%2Freference-guide%2F1.10%2F">Error in the documentation? Can’t find what you are looking for? Let us know!</a>
        <div class="footer">
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-22088032-1', 'auto');
		ga('send', 'pageview');

	</script>
</div>
    </div>
  </div>
  
  </body>
</html>