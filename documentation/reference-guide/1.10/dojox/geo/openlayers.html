<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojox.geo.openlayers &mdash; The Dojo Toolkit - Reference Guide</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.10.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>

    <link rel="stylesheet" href="/css/guide.css">
    <script type="text/javascript">
      dojoConfig = {
        async: true
      };
    </script>
    <script src="/scripts/dojo/dojo/dojo.js"></script>
    <script src="/scripts/guide/docs/guide.js"></script>
    <link rel="stylesheet" href="/scripts/dojo/dijit/themes/claro/claro.css">

  </head>
  <body role="document">
  

    <div class="document">

  <div class="nav">
	<div class="row">
		<div class="small-3 columns">
			<a href="/" class="navLogo"><span>Dojo</span></a>
		</div>
		<div class="small-9 columns text-right">
			<div class="mobileMenuToggle" data-menu-toggle></div>
			<div class="menu">
				<div class="mobileHeader">Menu</div>
				<ul class="inline-list menuItems right">
					<li><a href="">Get Dojo</a></li>
					<li><a href="/documentation/">Docs</a></li>
					<li><a href="">Help &amp; Support</a></li>
					<li><a href="">Blog</a></li>
					<li><a href="">Get Involved</a></li>
				</ul>
			</div>
		</div>
	</div>
</div>
  <main class="refguide">
    <div class="row">

      <div class="medium-3 columns sideNav">
        <h4>Reference Guide</h4>
        <div id="dtkVersion">
          <label for="refver">Dojo Version</label>
          <select id="refver" name="refver">
            <option value="1.6">1.6</option>
            <option value="1.7">1.7</option>
            <option value="1.8">1.8</option>
            <option value="1.9">1.9</option>
            <option value="1.10" selected="selected">1.10</option>
          </select>
        </div>
        <ul>
          <li><a href="../../index.html">Startpage</a></li>
          <li><a href="../../dojo/index.html">Dojo</a></li>
          <li><a href="../../dijit/index.html">Dijit</a></li>
          <li><a href="../index.html">DojoX</a></li>
        </ul>
        <ul>
<li><a class="reference internal" href="#">dojox.geo.openlayers</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#instantiate-an-openlayers-map-component">Instantiate an OpenLayers Map component</a><ul>
<li><a class="reference internal" href="#changing-the-base-layer-type">Changing the base layer type</a></li>
<li><a class="reference internal" href="#specifying-the-displayed-part-of-the-map">Specifying the displayed part of the map</a></li>
</ul>
</li>
<li><a class="reference internal" href="#positioning-shapes-on-the-map">Positioning shapes on the map</a></li>
<li><a class="reference internal" href="#positioning-widgets-on-the-map">Positioning widgets on the map</a></li>
</ul>
</li>
</ul>

        

            <div id="searchbox" style="display: none">
                <h3>Quick search</h3>
                <form class="search" action="../../search.html" method="get">
                    <input type="text" name="q" size="18" />
                    <input type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                 </form>
                 <p class="searchtip" style="font-size: 90%">
                     Enter search terms or a module, class or function name.
                 </p>
            </div>
      </div>
      <div class="medium-9 columns content">
        
  <div class="section" id="dojox-geo-openlayers">
<span id="id1"></span><h1><a class="toc-backref" href="#id2">dojox.geo.openlayers</a><a class="headerlink" href="#dojox-geo-openlayers" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Project owner:</th><td class="field-body">Chris Mitchell</td>
</tr>
<tr class="field-even field"><th class="field-name">Author:</th><td class="field-body">Marc Durocher</td>
</tr>
<tr class="field-odd field"><th class="field-name">since:</th><td class="field-body">V.1.7</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#dojox-geo-openlayers" id="id2">dojox.geo.openlayers</a><ul>
<li><a class="reference internal" href="#overview" id="id3">Overview</a></li>
<li><a class="reference internal" href="#instantiate-an-openlayers-map-component" id="id4">Instantiate an OpenLayers Map component</a><ul>
<li><a class="reference internal" href="#changing-the-base-layer-type" id="id5">Changing the base layer type</a></li>
<li><a class="reference internal" href="#specifying-the-displayed-part-of-the-map" id="id6">Specifying the displayed part of the map</a></li>
</ul>
</li>
<li><a class="reference internal" href="#positioning-shapes-on-the-map" id="id7">Positioning shapes on the map</a></li>
<li><a class="reference internal" href="#positioning-widgets-on-the-map" id="id8">Positioning widgets on the map</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id3">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Dojo&#8217;s dojox.geo.openlayers module provides a mapping component based on the OpenLayers (<a class="reference external" href="http://www.openlayers.org">http://www.openlayers.org</a>) library. This component is mainly a wrapper of the OpenLayers library with additional features such as displaying geo-referenced GFX shape and placing geo-referenced widgets on a background map. Two components are available : a div based component and a widget based component so you can either create a map in a programmatic way or use markup to insert a map in a web page.</p>
<p>This Map component is intended to display a background map with graphical GFX or widget overlay. The background map can come from various online map providers such as OpenStreetMap, Google Maps of ESRI Maps. Note that you may have to include specific map provider javascript library in order to have access to the corresponding mapping service.</p>
<p>In any cases, you will have to include the OpenLayers library in order to use the dojox.geo.openlayers module.</p>
</div>
<div class="section" id="instantiate-an-openlayers-map-component">
<h2><a class="toc-backref" href="#id4">Instantiate an OpenLayers Map component</a><a class="headerlink" href="#instantiate-an-openlayers-map-component" title="Permalink to this headline">¶</a></h2>
<p>You can either instantiate a OpenLayers Map component in a programmatic way or using a markup definition. In both cases, you will need to import the OpenLayers library. This library is available at the openlayers.org site and you can include it in your page with the following script tag :</p>
<div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;http://openlayers.org/api/OpenLayers.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;script type=&quot;text/javascript&quot; src=&quot;http://openlayers.org/api/OpenLayers.js&quot;&gt;&lt;/script&gt;</textarea></div><p>Here are some examples of how to create a basic OpenLayers Map component :</p>
<p>Programmatic way of creating a Map component:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/ready&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/geo/openlayers/Map&quot;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ready</span><span class="p">,</span> <span class="nx">Map</span><span class="p">){</span>
  <span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Map</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">);</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">fitTo</span><span class="p">([</span> <span class="o">-</span><span class="mi">160</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> <span class="o">-</span><span class="mi">70</span> <span class="p">]);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/ready&quot;, &quot;dojox/geo/openlayers/Map&quot; ], function(ready, Map){
  ready(function(){
    map = new Map(&quot;map&quot;);
    map.fitTo([ -160, 70, 160, -70 ]);
  });
});</textarea></div><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;map&quot;</span> <span class="na">style=</span><span class="s">&quot;background-color: #b5d0d0; width: 100%; height: 100%;&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;div id=&quot;map&quot; style=&quot;background-color: #b5d0d0; width: 100%; height: 100%;&quot;&gt;&lt;/div&gt;</textarea></div><p>Creating a Map using markup declaration:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojox/geo/openlayers/Layer&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/geo/openlayers/widget/Map&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/parser&quot;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">map</span><span class="p">){});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojox/geo/openlayers/Layer&quot;, &quot;dojox/geo/openlayers/widget/Map&quot;, &quot;dojo/parser&quot; ], function(map){});</textarea></div><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;map&quot;</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dojox.geo.openlayers.widget.Map&quot;</span> <span class="na">style=</span><span class="s">&quot;background-color: #b5d0d0; width: 100%; height: 100%;&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;div id=&quot;map&quot; data-dojo-type=&quot;dojox.geo.openlayers.widget.Map&quot; style=&quot;background-color: #b5d0d0; width: 100%; height: 100%;&quot;&gt;&lt;/div&gt;</textarea></div><div class="section" id="changing-the-base-layer-type">
<h3><a class="toc-backref" href="#id5">Changing the base layer type</a><a class="headerlink" href="#changing-the-base-layer-type" title="Permalink to this headline">¶</a></h3>
<p>When creating a map, a background base layer is automatically created. The default base layer type is an OpenSreetMap layer whose type is dojox.geo.openlayers.baseLayerType.OSM. It shows the background map by connecting to the OpenStreeMap server.
You can change the base layer type to access another map provider by calling setBaseLayerType or by setting the baseLayerType attribute on the widget&#8217;s markup.</p>
<p>Available base layer types are :</p>
<blockquote>
<div><ul class="simple">
<li>dojox.geo.openlayers.BaseLayerType.OSM:           The Open Street Map base layer type selector.</li>
<li>dojox.geo.openlayers.BaseLayerType.WMS:           The Web Map Server base layer type selector.</li>
<li>dojox.geo.openlayers.BaseLayerType.GOOGLE:        The Google base layer type selector.</li>
<li>dojox.geo.openlayers.BaseLayerType.VIRTUAL_EARTH: The Virtual Earth base layer type selector.</li>
<li>dojox.geo.openlayers.BaseLayerType.BING :         Same as Virtual Earth</li>
<li>dojox.geo.openlayers.BaseLayerType.YAHOO:         The Yahoo Maps base layer type selector.</li>
<li>dojox.geo.openlayers.BaseLayerType.ARCGIS:        The ESRI ARCGis base layer selector.</li>
</ul>
</div></blockquote>
<p>Note that if you attempt to access a mapping provider like Google Maps or Yahoo Maps, you will have to include the specific mapping provider API in your application.</p>
<p>Here are the JavaScript API needed to access specific map provider :</p>
<blockquote>
<div><ul>
<li><p class="first">Google API:</p>
<div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://maps.google.com/maps/api/js?v=3&amp;amp;sensor=false&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;script src=&quot;http://maps.google.com/maps/api/js?v=3&amp;amp;sensor=false&quot;&gt;&lt;/script&gt;</textarea></div></li>
<li><p class="first">Microsoft Virtual Hearth:</p>
<div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&#39;http://dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.3&#39;</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;script src='http://dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.3'&gt;&lt;/script&gt;</textarea></div></li>
<li><p class="first">Yahoo Maps:</p>
<div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://api.maps.yahoo.com/ajaxymap?v=3.0&amp;appid=euzuro-openlayers&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;script src=&quot;http://api.maps.yahoo.com/ajaxymap?v=3.0&amp;appid=euzuro-openlayers&quot;&gt;&lt;/script&gt;</textarea></div></li>
</ul>
</div></blockquote>
<p>Some examples of how to set/change the base layer type:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">map</span><span class="p">;</span>

<span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/ready&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/dom&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/geo/openlayers/Map&quot;</span><span class="p">,</span> <span class="s2">&quot;dijit/form/RadioButton&quot;</span><span class="p">],</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">ready</span><span class="p">,</span> <span class="nx">dom</span><span class="p">,</span> <span class="nx">Map</span><span class="p">,</span> <span class="nx">RadioButton</span><span class="p">){</span>
  <span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Map</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">baseLayerType</span> <span class="o">:</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">openlayers</span><span class="p">.</span><span class="nx">BaseLayerType</span><span class="p">.</span><span class="nx">ARCGIS</span>
      <span class="p">});</span>
      <span class="nx">map</span><span class="p">.</span><span class="nx">fitTo</span><span class="p">([</span> <span class="o">-</span><span class="mi">160</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> <span class="o">-</span><span class="mi">70</span> <span class="p">]);</span>
  <span class="p">});</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">layerType</span><span class="p">(</span><span class="nx">id</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">dom</span><span class="p">.</span><span class="nx">byId</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">i</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
  <span class="nx">map</span><span class="p">.</span><span class="nx">setBaseLayerType</span><span class="p">(</span><span class="nx">v</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var map;

require([&quot;dojo/ready&quot;, &quot;dojo/dom&quot;, &quot;dojox/geo/openlayers/Map&quot;, &quot;dijit/form/RadioButton&quot;],
        function(ready, dom, Map, RadioButton){
  ready(function(){
      map = new Map(&quot;map&quot;, {
        baseLayerType : dojox.geo.openlayers.BaseLayerType.ARCGIS
      });
      map.fitTo([ -160, 70, 160, -70 ]);
  });
});

function layerType(id){
  var i = dom.byId(id);
  var v = i.value;
  map.setBaseLayerType(v);
}</textarea></div><div class="highlight"><pre><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;radio&quot;</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dijit.form.RadioButton&quot;</span> <span class="na">id=</span><span class="s">&quot;osm&quot;</span> <span class="na">name=</span><span class="s">&quot;layertype&quot;</span> <span class="na">value=</span><span class="s">&quot;OSM&quot;</span> <span class="na">onClick=</span><span class="s">&quot;layerType(&#39;osm&#39;)&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;radio&quot;</span> <span class="na">checked</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dijit.form.RadioButton&quot;</span> <span class="na">id=</span><span class="s">&quot;arcgis&quot;</span> <span class="na">name=</span><span class="s">&quot;layertype&quot;</span> <span class="na">value=</span><span class="s">&quot;ArcGIS&quot;</span> <span class="na">onClick=</span><span class="s">&quot;layerType(&#39;arcgis&#39;)&quot;</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;map&quot;</span> <span class="na">style=</span><span class="s">&quot;background-color: #b5d0d0; width: 100%; height: 100%;&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;input type=&quot;radio&quot; data-dojo-type=&quot;dijit.form.RadioButton&quot; id=&quot;osm&quot; name=&quot;layertype&quot; value=&quot;OSM&quot; onClick=&quot;layerType('osm')&quot; /&gt;
&lt;input type=&quot;radio&quot; checked data-dojo-type=&quot;dijit.form.RadioButton&quot; id=&quot;arcgis&quot; name=&quot;layertype&quot; value=&quot;ArcGIS&quot; onClick=&quot;layerType('arcgis')&quot; /&gt;

&lt;div id=&quot;map&quot; style=&quot;background-color: #b5d0d0; width: 100%; height: 100%;&quot;&gt;&lt;/div&gt;</textarea></div></div>
<div class="section" id="specifying-the-displayed-part-of-the-map">
<h3><a class="toc-backref" href="#id6">Specifying the displayed part of the map</a><a class="headerlink" href="#specifying-the-displayed-part-of-the-map" title="Permalink to this headline">¶</a></h3>
<p>You can define the initial location and extent of map that is displayed by using the fitTo method of the map. This method can take several type of arguments such as extent to be displayed or the initial location.
You can also define the initial location as markup attribute if you use the markup widget version of the map component.
Initial location ca be in the form of :</p>
<div class="highlight"><pre><span class="p">{</span> <span class="nx">bounds</span> <span class="o">:</span> <span class="p">[</span><span class="nx">ulx</span><span class="p">,</span> <span class="nx">uly</span><span class="p">,</span> <span class="nx">lrx</span><span class="p">,</span> <span class="nx">lry</span><span class="p">]</span> <span class="p">}</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">{ bounds : [ulx, uly, lrx, lry] }</textarea></div><p>The map is fit on the specified bounds expressed as decimal degrees latitude and longitude. The bounds are defined with their upper left and lower right corners coordinates.</p>
<div class="highlight"><pre><span class="p">{</span> <span class="nx">position</span> <span class="o">:</span> <span class="p">[</span><span class="nx">longitude</span><span class="p">,</span> <span class="nx">latitude</span><span class="p">],</span> <span class="nx">extent</span> <span class="o">:</span> <span class="nx">degrees</span> <span class="p">}</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">{ position : [longitude, latitude], extent : degrees }</textarea></div><p>The map is fit on the specified position showing the extent &lt;extent&gt; around the specified center position.</p>
<p>Programmatic version:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/ready&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/geo/openlayers/Map&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ready</span><span class="p">,</span> <span class="nx">Map</span><span class="p">){</span>

  <span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Map</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">);</span>
    <span class="c1">// This is New York location</span>
    <span class="kd">var</span> <span class="nx">ny</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">latitude</span> <span class="o">:</span> <span class="mf">40.71427</span><span class="p">,</span>
      <span class="nx">longitude</span> <span class="o">:</span> <span class="o">-</span><span class="mf">74.00597</span>
    <span class="p">};</span>
    <span class="c1">// fit to New York with 0.1 degrees extent</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">fitTo</span><span class="p">({</span>
      <span class="nx">position</span> <span class="o">:</span> <span class="p">[</span> <span class="nx">ny</span><span class="p">.</span><span class="nx">longitude</span><span class="p">,</span> <span class="nx">ny</span><span class="p">.</span><span class="nx">latitude</span> <span class="p">],</span>
      <span class="nx">extent</span> <span class="o">:</span> <span class="mf">0.1</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/ready&quot;, &quot;dojox/geo/openlayers/Map&quot;], function(ready, Map){

  ready(function(){
    var map = new Map(&quot;map&quot;);
    // This is New York location
    var ny = {
      latitude : 40.71427,
      longitude : -74.00597
    };
    // fit to New York with 0.1 degrees extent
    map.fitTo({
      position : [ ny.longitude, ny.latitude ],
      extent : 0.1
    });
  });
});</textarea></div><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;map&quot;</span> <span class="na">style=</span><span class="s">&quot;background-color: #b5d0d0; width: 100%; height: 100%;&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;div id=&quot;map&quot; style=&quot;background-color: #b5d0d0; width: 100%; height: 100%;&quot;&gt;&lt;/div&gt;</textarea></div><p>Markup version:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/parser&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/geo/openlayers/widget/Map&quot;</span> <span class="p">],</span> <span class="kd">function</span><span class="p">(){});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/parser&quot;, &quot;dojox/geo/openlayers/widget/Map&quot; ], function(){});</textarea></div><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;map&quot;</span> <span class="na">data-dojo-type=</span><span class="s">&quot;dojox.geo.openlayers.widget.Map&quot;</span>
              <span class="na">initialLocation=</span><span class="s">&quot;{position : [ -74.00597, 40.71427 ], extent : 0.1 }&quot;</span>
              <span class="na">style=</span><span class="s">&quot;background-color: #b5d0d0; width: 100%; height: 100%;&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;div id=&quot;map&quot; data-dojo-type=&quot;dojox.geo.openlayers.widget.Map&quot;
              initialLocation=&quot;{position : [ -74.00597, 40.71427 ], extent : 0.1 }&quot;
              style=&quot;background-color: #b5d0d0; width: 100%; height: 100%;&quot;&gt;
&lt;/div&gt;</textarea></div></div>
</div>
<div class="section" id="positioning-shapes-on-the-map">
<h2><a class="toc-backref" href="#id7">Positioning shapes on the map</a><a class="headerlink" href="#positioning-shapes-on-the-map" title="Permalink to this headline">¶</a></h2>
<p>The OpenLayers mapping component allows to position GFX shapes on the map at specified locations. The location of the shape is specified as longitude and latitude coordinates. To place such a shape on the map, you will need to insert a dedicated dojox.geo.openlayer.GfxLayer layer in the map and add dojox.geo.openlayers.GeometryFeature s to it. The GeometryFeature class defines the position and the type of shape to display.</p>
<p>The following code shows how to display a point at the New York location. A circle is displayed as it is the default GFX shape to be displayed for a Point geometry.</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/ready&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/geo/openlayers/Map&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/geo/openlayers/GfxLayer&quot;</span><span class="p">,</span>
          <span class="s2">&quot;dojox/geo/openlayers/GeometryFeature&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/geo/openlayers/Point&quot;</span> <span class="p">],</span>
     <span class="kd">function</span><span class="p">(</span><span class="nx">ready</span><span class="p">,</span> <span class="nx">Map</span><span class="p">,</span> <span class="nx">GfxLayer</span><span class="p">,</span> <span class="nx">GeometryFeature</span><span class="p">,</span> <span class="nx">Point</span><span class="p">){</span>

  <span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="c1">// create a map widget.</span>
    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Map</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">);</span>
   <span class="c1">// This is New York</span>
    <span class="kd">var</span> <span class="nx">ny</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">latitude</span> <span class="o">:</span> <span class="mf">40.71427</span><span class="p">,</span>
      <span class="nx">longitude</span> <span class="o">:</span> <span class="o">-</span><span class="mf">74.00597</span>
    <span class="p">};</span>
    <span class="c1">// create a GfxLayer</span>
    <span class="kd">var</span> <span class="nx">layer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GfxLayer</span><span class="p">();</span>
    <span class="c1">// create a Point geometry at New York location</span>
    <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Point</span><span class="p">({</span><span class="nx">x</span><span class="o">:</span><span class="nx">ny</span><span class="p">.</span><span class="nx">longitude</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span><span class="nx">ny</span><span class="p">.</span><span class="nx">latitude</span><span class="p">});</span>
    <span class="c1">// create a GeometryFeature</span>
    <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GeometryFeature</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
    <span class="c1">// set the shape properties, fill and stroke</span>
    <span class="nx">f</span><span class="p">.</span><span class="nx">setFill</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span> <span class="p">]);</span>
    <span class="nx">f</span><span class="p">.</span><span class="nx">setStroke</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">]);</span>
    <span class="nx">f</span><span class="p">.</span><span class="nx">setShapeProperties</span><span class="p">({</span>
      <span class="nx">r</span> <span class="o">:</span> <span class="mi">20</span>
    <span class="p">});</span>
    <span class="c1">// add the feature to the layer</span>
    <span class="nx">layer</span><span class="p">.</span><span class="nx">addFeature</span><span class="p">(</span><span class="nx">f</span><span class="p">);</span>
    <span class="c1">// add layer to the map</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">layer</span><span class="p">);</span>
    <span class="c1">// fit to New York with 0.1 degrees extent</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">fitTo</span><span class="p">({</span>
    <span class="nx">position</span> <span class="o">:</span> <span class="p">[</span> <span class="nx">ny</span><span class="p">.</span><span class="nx">longitude</span><span class="p">,</span> <span class="nx">ny</span><span class="p">.</span><span class="nx">latitude</span> <span class="p">],</span>
                 <span class="nx">extent</span> <span class="o">:</span> <span class="mf">0.1</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/ready&quot;, &quot;dojox/geo/openlayers/Map&quot;, &quot;dojox/geo/openlayers/GfxLayer&quot;,
          &quot;dojox/geo/openlayers/GeometryFeature&quot;, &quot;dojox/geo/openlayers/Point&quot; ],
     function(ready, Map, GfxLayer, GeometryFeature, Point){

  ready(function(){
    // create a map widget.
    var map = new Map(&quot;map&quot;);
   // This is New York
    var ny = {
      latitude : 40.71427,
      longitude : -74.00597
    };
    // create a GfxLayer
    var layer = new GfxLayer();
    // create a Point geometry at New York location
    var p = new Point({x:ny.longitude, y:ny.latitude});
    // create a GeometryFeature
    var f = new GeometryFeature(p);
    // set the shape properties, fill and stroke
    f.setFill([ 0, 128, 128 ]);
    f.setStroke([ 0, 0, 0 ]);
    f.setShapeProperties({
      r : 20
    });
    // add the feature to the layer
    layer.addFeature(f);
    // add layer to the map
    map.addLayer(layer);
    // fit to New York with 0.1 degrees extent
    map.fitTo({
    position : [ ny.longitude, ny.latitude ],
                 extent : 0.1
    });
  });
});</textarea></div><p>You can also place polylines on the map. In this case, you will need to create a dojox.geo.openlayers.LineString geometry so that the points defining the polyline are geo-referenced. The following example shows how to create a polyline joining some major towns of the world.</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/ready&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/geo/openlayers/Map&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/geo/openlayers/GfxLayer&quot;</span><span class="p">,</span>
         <span class="s2">&quot;dojox/geo/openlayers/GeometryFeature&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/geo/openlayers/LineString&quot;</span><span class="p">],</span>
         <span class="kd">function</span><span class="p">(</span><span class="nx">ready</span><span class="p">,</span> <span class="nx">Map</span><span class="p">,</span> <span class="nx">GfxLayer</span><span class="p">,</span> <span class="nx">GeometryFeature</span><span class="p">,</span> <span class="nx">LineString</span><span class="p">){</span>

   <span class="kd">var</span> <span class="nx">towns</span> <span class="o">=</span> <span class="p">[</span> <span class="p">{</span>
      <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;Sydney&#39;</span><span class="p">,</span>
      <span class="nx">x</span> <span class="o">:</span> <span class="mf">151.20732</span><span class="p">,</span>
      <span class="nx">y</span> <span class="o">:</span> <span class="o">-</span><span class="mf">33.86785</span>
   <span class="p">},</span> <span class="p">{</span>
      <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;Shanghai&#39;</span><span class="p">,</span>
      <span class="nx">x</span> <span class="o">:</span> <span class="mf">121.45806</span><span class="p">,</span>
      <span class="nx">y</span> <span class="o">:</span> <span class="mf">31.22222</span>
   <span class="p">},</span> <span class="p">{</span>
      <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;Moscow&#39;</span><span class="p">,</span>
      <span class="nx">x</span> <span class="o">:</span> <span class="mf">37.61556</span><span class="p">,</span>
      <span class="nx">y</span> <span class="o">:</span> <span class="mf">55.75222</span>
   <span class="p">},</span> <span class="p">{</span>
      <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;London&#39;</span><span class="p">,</span>
      <span class="nx">x</span> <span class="o">:</span> <span class="o">-</span><span class="mf">0.12574</span><span class="p">,</span>
      <span class="nx">y</span> <span class="o">:</span> <span class="mf">51.50853</span>
   <span class="p">},</span> <span class="p">{</span>
      <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;Toronto&#39;</span><span class="p">,</span>
      <span class="nx">x</span> <span class="o">:</span> <span class="o">-</span><span class="mf">79.4163</span><span class="p">,</span>
      <span class="nx">y</span> <span class="o">:</span> <span class="mf">43.70011</span>
   <span class="p">},</span> <span class="p">{</span>
      <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;Buenos Aires&#39;</span><span class="p">,</span>
      <span class="nx">x</span> <span class="o">:</span> <span class="o">-</span><span class="mf">58.37723</span><span class="p">,</span>
      <span class="nx">y</span> <span class="o">:</span> <span class="o">-</span><span class="mf">34.61315</span>
   <span class="p">},</span> <span class="p">{</span>
      <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;Kinshasa&#39;</span><span class="p">,</span>
      <span class="nx">x</span> <span class="o">:</span> <span class="mf">15.32146</span><span class="p">,</span>
      <span class="nx">y</span> <span class="o">:</span> <span class="o">-</span><span class="mf">4.32459</span>
   <span class="p">},</span> <span class="p">{</span>
      <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;Cairo&#39;</span><span class="p">,</span>
      <span class="nx">x</span> <span class="o">:</span> <span class="mf">31.24967</span><span class="p">,</span>
      <span class="nx">y</span> <span class="o">:</span> <span class="mf">30.06263</span>
   <span class="p">}</span> <span class="p">];</span>

   <span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
        <span class="c1">// create a map widget and place it on the page.</span>
        <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Map</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">);</span>
        <span class="c1">// create a GfxLayer</span>
        <span class="kd">var</span> <span class="nx">layer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GfxLayer</span><span class="p">();</span>
        <span class="c1">// towns objects already have a x and y field.</span>
        <span class="kd">var</span> <span class="nx">pts</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">LineString</span><span class="p">(</span><span class="nx">towns</span><span class="p">);</span>
        <span class="c1">// create a GeometryFeature</span>
        <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GeometryFeature</span><span class="p">(</span><span class="nx">pts</span><span class="p">);</span>
        <span class="c1">// set the shape stroke property</span>
        <span class="nx">f</span><span class="p">.</span><span class="nx">setStroke</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">]);</span>
        <span class="c1">// add the feature to the layer</span>
        <span class="nx">layer</span><span class="p">.</span><span class="nx">addFeature</span><span class="p">(</span><span class="nx">f</span><span class="p">);</span>
        <span class="c1">// add layer to the map</span>
        <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">layer</span><span class="p">);</span>
   <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/ready&quot;, &quot;dojox/geo/openlayers/Map&quot;, &quot;dojox/geo/openlayers/GfxLayer&quot;,
         &quot;dojox/geo/openlayers/GeometryFeature&quot;, &quot;dojox/geo/openlayers/LineString&quot;],
         function(ready, Map, GfxLayer, GeometryFeature, LineString){

   var towns = [ {
      name : 'Sydney',
      x : 151.20732,
      y : -33.86785
   }, {
      name : 'Shanghai',
      x : 121.45806,
      y : 31.22222
   }, {
      name : 'Moscow',
      x : 37.61556,
      y : 55.75222
   }, {
      name : 'London',
      x : -0.12574,
      y : 51.50853
   }, {
      name : 'Toronto',
      x : -79.4163,
      y : 43.70011
   }, {
      name : 'Buenos Aires',
      x : -58.37723,
      y : -34.61315
   }, {
      name : 'Kinshasa',
      x : 15.32146,
      y : -4.32459
   }, {
      name : 'Cairo',
      x : 31.24967,
      y : 30.06263
   } ];

   ready(function(){
        // create a map widget and place it on the page.
        var map = new Map(&quot;map&quot;);
        // create a GfxLayer
        var layer = new GfxLayer();
        // towns objects already have a x and y field.
        var pts = new LineString(towns);
        // create a GeometryFeature
        var f = new GeometryFeature(pts);
        // set the shape stroke property
        f.setStroke([ 0, 0, 0 ]);
        // add the feature to the layer
        layer.addFeature(f);
        // add layer to the map
        map.addLayer(layer);
   });
});</textarea></div><p>You can also place combination of geometries using a dojox.geo.openlayers.Collection geometry which can hold any combination of existing geometries. Here is an example that shows how to use this collection geometry:</p>
<div class="highlight"><pre>  <span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/_base/array&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/ready&quot;</span><span class="p">,</span>
               <span class="s2">&quot;dojox/geo/openlayers/Map&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/geo/openlayers/GfxLayer&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dojox/geo/openlayers/GeometryFeature&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/geo/openlayers/Collection&quot;</span><span class="p">,</span>
            <span class="s2">&quot;dojox/geo/openlayers/Linestring&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/geo/openlayers/Point&quot;</span><span class="p">],</span>
        <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">ready</span><span class="p">,</span> <span class="nx">Map</span><span class="p">,</span> <span class="nx">GfxLayer</span><span class="p">,</span> <span class="nx">GeometryFeature</span><span class="p">,</span> <span class="nx">Collection</span><span class="p">,</span> <span class="nx">LineString</span><span class="p">,</span> <span class="nx">Point</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">towns</span> <span class="o">=</span> <span class="p">[</span> <span class="p">{</span>
      <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;Sydney&#39;</span><span class="p">,</span>
      <span class="nx">x</span> <span class="o">:</span> <span class="mf">151.20732</span><span class="p">,</span>
      <span class="nx">y</span> <span class="o">:</span> <span class="o">-</span><span class="mf">33.86785</span>
    <span class="p">},</span> <span class="p">{</span>
    <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;Shanghai&#39;</span><span class="p">,</span>
      <span class="nx">x</span> <span class="o">:</span> <span class="mf">121.45806</span><span class="p">,</span>
      <span class="nx">y</span> <span class="o">:</span> <span class="mf">31.22222</span>
    <span class="p">},</span> <span class="p">{</span>
    <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;Moscow&#39;</span><span class="p">,</span>
      <span class="nx">x</span> <span class="o">:</span> <span class="mf">37.61556</span><span class="p">,</span>
      <span class="nx">y</span> <span class="o">:</span> <span class="mf">55.75222</span>
    <span class="p">},</span> <span class="p">{</span>
    <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;London&#39;</span><span class="p">,</span>
      <span class="nx">x</span> <span class="o">:</span> <span class="o">-</span><span class="mf">0.12574</span><span class="p">,</span>
      <span class="nx">y</span> <span class="o">:</span> <span class="mf">51.50853</span>
    <span class="p">},</span> <span class="p">{</span>
    <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;Toronto&#39;</span><span class="p">,</span>
      <span class="nx">x</span> <span class="o">:</span> <span class="o">-</span><span class="mf">79.4163</span><span class="p">,</span>
      <span class="nx">y</span> <span class="o">:</span> <span class="mf">43.70011</span>
    <span class="p">},</span> <span class="p">{</span>
    <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;Buenos Aires&#39;</span><span class="p">,</span>
      <span class="nx">x</span> <span class="o">:</span> <span class="o">-</span><span class="mf">58.37723</span><span class="p">,</span>
      <span class="nx">y</span> <span class="o">:</span> <span class="o">-</span><span class="mf">34.61315</span>
    <span class="p">},</span> <span class="p">{</span>
    <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;Kinshasa&#39;</span><span class="p">,</span>
      <span class="nx">x</span> <span class="o">:</span> <span class="mf">15.32146</span><span class="p">,</span>
      <span class="nx">y</span> <span class="o">:</span> <span class="o">-</span><span class="mf">4.32459</span>
    <span class="p">},</span> <span class="p">{</span>
    <span class="nx">name</span> <span class="o">:</span> <span class="s1">&#39;Cairo&#39;</span><span class="p">,</span>
      <span class="nx">x</span> <span class="o">:</span> <span class="mf">31.24967</span><span class="p">,</span>
      <span class="nx">y</span> <span class="o">:</span> <span class="mf">30.06263</span>
    <span class="p">}</span> <span class="p">];</span>

    <span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
      <span class="c1">// create a map widget and place it on the page.</span>
      <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Map</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">);</span>
     <span class="c1">// create a GfxLayer</span>
     <span class="kd">var</span> <span class="nx">layer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GfxLayer</span><span class="p">();</span>
     <span class="c1">// The array of geometries</span>
     <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[];</span>
     <span class="c1">// towns objects already have a x and y field.</span>
     <span class="kd">var</span> <span class="nx">pts</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">LineString</span><span class="p">(</span><span class="nx">towns</span><span class="p">);</span>
     <span class="nx">a</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pts</span><span class="p">);</span>
     <span class="c1">// make a point for each line.</span>
     <span class="nx">array</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">towns</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">){</span>
       <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Point</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
       <span class="nx">a</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="kd">var</span> <span class="nx">col</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Collection</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
    <span class="c1">// create a GeometryFeature</span>
    <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GeometryFeature</span><span class="p">(</span><span class="nx">col</span><span class="p">);</span>
    <span class="c1">// set the shape properties, fill and stroke</span>
    <span class="nx">f</span><span class="p">.</span><span class="nx">setStroke</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">]);</span>
    <span class="nx">f</span><span class="p">.</span><span class="nx">setShapeProperties</span><span class="p">({</span>
      <span class="nx">r</span> <span class="o">:</span> <span class="mi">10</span>
    <span class="p">});</span>
    <span class="c1">// add the feature to the layer</span>
    <span class="nx">layer</span><span class="p">.</span><span class="nx">addFeature</span><span class="p">(</span><span class="nx">f</span><span class="p">);</span>
    <span class="c1">// add layer to the map</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">layer</span><span class="p">);</span>
    <span class="c1">// fit to New York with 0.1 degrees extent</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">  require([&quot;dojo/_base/array&quot;, &quot;dojo/ready&quot;,
               &quot;dojox/geo/openlayers/Map&quot;, &quot;dojox/geo/openlayers/GfxLayer&quot;,
            &quot;dojox/geo/openlayers/GeometryFeature&quot;, &quot;dojox/geo/openlayers/Collection&quot;,
            &quot;dojox/geo/openlayers/Linestring&quot;, &quot;dojox/geo/openlayers/Point&quot;],
        function(array, ready, Map, GfxLayer, GeometryFeature, Collection, LineString, Point){
    var towns = [ {
      name : 'Sydney',
      x : 151.20732,
      y : -33.86785
    }, {
    name : 'Shanghai',
      x : 121.45806,
      y : 31.22222
    }, {
    name : 'Moscow',
      x : 37.61556,
      y : 55.75222
    }, {
    name : 'London',
      x : -0.12574,
      y : 51.50853
    }, {
    name : 'Toronto',
      x : -79.4163,
      y : 43.70011
    }, {
    name : 'Buenos Aires',
      x : -58.37723,
      y : -34.61315
    }, {
    name : 'Kinshasa',
      x : 15.32146,
      y : -4.32459
    }, {
    name : 'Cairo',
      x : 31.24967,
      y : 30.06263
    } ];

    ready(function(){
      // create a map widget and place it on the page.
      var map = new Map(&quot;map&quot;);
     // create a GfxLayer
     var layer = new GfxLayer();
     // The array of geometries
     var a = [];
     // towns objects already have a x and y field.
     var pts = new LineString(towns);
     a.push(pts);
     // make a point for each line.
     array.forEach(towns, function(t){
       var p = new Point(t);
       a.push(p);
    });
    var col = new Collection(a);
    // create a GeometryFeature
    var f = new GeometryFeature(col);
    // set the shape properties, fill and stroke
    f.setStroke([ 0, 0, 0 ]);
    f.setShapeProperties({
      r : 10
    });
    // add the feature to the layer
    layer.addFeature(f);
    // add layer to the map
    map.addLayer(layer);
    // fit to New York with 0.1 degrees extent
  });
});</textarea></div><p>You also might want to display a specific shape on the map. For that, you can redefine the <cite>createShape</cite> function of the GeometryFeature and create the shape you want. This methods takes the dojox.gfx.Surface as parameter that can be used to create the shape.</p>
<p>Example that shows a star at Paris location:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo/ready&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/geo/openlayers/Map&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/geo/openlayers/GfxLayer&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dojox/geo/openlayers/Point&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/geo/openlayers/GeometryFeature&quot;</span><span class="p">],</span>
    <span class="kd">function</span><span class="p">(</span><span class="nx">ready</span><span class="p">,</span> <span class="nx">Map</span><span class="p">,</span> <span class="nx">GfxLayer</span><span class="p">,</span> <span class="nx">Point</span><span class="p">,</span> <span class="nx">GeometryFeature</span><span class="p">){</span>

  <span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

    <span class="c1">// create a map widget and place it on the page.</span>
    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Map</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">);</span>

    <span class="c1">// This Paris</span>

    <span class="kd">var</span> <span class="nx">paris</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">latitude</span> <span class="o">:</span> <span class="mf">48.866667</span><span class="p">,</span>
      <span class="nx">longitude</span> <span class="o">:</span> <span class="mf">2.333333</span>
    <span class="p">};</span>
    <span class="c1">// create a GfxLayer</span>
    <span class="kd">var</span> <span class="nx">layer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GfxLayer</span><span class="p">();</span>
    <span class="c1">// create a OpenLayers Point geometry at New York location</span>
    <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Point</span><span class="p">({</span>
      <span class="nx">x</span> <span class="o">:</span> <span class="nx">paris</span><span class="p">.</span><span class="nx">longitude</span><span class="p">,</span>
      <span class="nx">y</span> <span class="o">:</span> <span class="nx">paris</span><span class="p">.</span><span class="nx">latitude</span>
    <span class="p">});</span>
    <span class="c1">// create a GeometryFeature</span>
    <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GeometryFeature</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
    <span class="c1">// create a star graphic</span>
    <span class="nx">f</span><span class="p">.</span><span class="nx">createShape</span> <span class="o">=</span> <span class="nx">myCreateShape</span><span class="p">;</span>
    <span class="nx">f</span><span class="p">.</span><span class="nx">setStroke</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">]);</span>
    <span class="nx">f</span><span class="p">.</span><span class="nx">setFill</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">128</span> <span class="p">]);</span>
    <span class="c1">// add the feature to the layer</span>
    <span class="nx">layer</span><span class="p">.</span><span class="nx">addFeature</span><span class="p">(</span><span class="nx">f</span><span class="p">);</span>
    <span class="c1">// add layer to the map</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">layer</span><span class="p">);</span>
    <span class="c1">// fit to Paris with 0.1 degrees extent</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">fitTo</span><span class="p">({</span>
      <span class="nx">position</span> <span class="o">:</span> <span class="p">[</span> <span class="nx">paris</span><span class="p">.</span><span class="nx">longitude</span><span class="p">,</span> <span class="nx">paris</span><span class="p">.</span><span class="nx">latitude</span> <span class="p">],</span>
      <span class="nx">extent</span> <span class="o">:</span> <span class="mf">0.1</span>
    <span class="p">});</span>
  <span class="p">});</span>

  <span class="kd">function</span> <span class="nx">myCreateShape</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">r1</span> <span class="o">=</span> <span class="mi">20</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">r2</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">branches</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;create star &quot;</span> <span class="o">+</span> <span class="nx">r1</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">star</span> <span class="o">=</span> <span class="nx">makeStarShape</span><span class="p">(</span><span class="nx">r1</span><span class="p">,</span> <span class="nx">r2</span><span class="p">,</span> <span class="nx">branches</span><span class="p">,</span> <span class="nx">start</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">createPath</span><span class="p">();</span>
    <span class="nx">path</span><span class="p">.</span><span class="nx">setShape</span><span class="p">({</span>
      <span class="nx">path</span> <span class="o">:</span> <span class="nx">star</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="nx">path</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">makeStarShape</span><span class="p">(</span><span class="nx">r1</span><span class="p">,</span> <span class="nx">r2</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">start</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">precision</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">TPI</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">di</span> <span class="o">=</span> <span class="nx">TPI</span> <span class="o">/</span> <span class="nx">b</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">start</span><span class="p">)</span>
      <span class="nx">start</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">end</span> <span class="o">=</span> <span class="nx">start</span> <span class="o">+</span> <span class="nx">TPI</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span> <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">end</span><span class="p">;</span> <span class="nx">i</span> <span class="o">+=</span> <span class="nx">di</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">c1</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">s1</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">i2</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">di</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">c2</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">i2</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">s2</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">i2</span><span class="p">);</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">s</span> <span class="o">==</span> <span class="kc">null</span><span class="p">){</span>
        <span class="nx">s</span> <span class="o">=</span> <span class="s2">&quot;M&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">s1</span> <span class="o">*</span> <span class="nx">r1</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="nx">precision</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">c1</span> <span class="o">*</span> <span class="nx">r1</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="nx">precision</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
      <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="nx">s</span> <span class="o">+=</span> <span class="s2">&quot;L&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">s1</span> <span class="o">*</span> <span class="nx">r1</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="nx">precision</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">c1</span> <span class="o">*</span> <span class="nx">r1</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="nx">precision</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">s</span> <span class="o">+=</span> <span class="s2">&quot;L&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">s2</span> <span class="o">*</span> <span class="nx">r2</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="nx">precision</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">c2</span> <span class="o">*</span> <span class="nx">r2</span><span class="p">).</span><span class="nx">toFixed</span><span class="p">(</span><span class="nx">precision</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">s</span> <span class="o">+=</span> <span class="s2">&quot;z&quot;</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">s</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([&quot;dojo/ready&quot;, &quot;dojox/geo/openlayers/Map&quot;, &quot;dojox/geo/openlayers/GfxLayer&quot;,
    &quot;dojox/geo/openlayers/Point&quot;, &quot;dojox/geo/openlayers/GeometryFeature&quot;],
    function(ready, Map, GfxLayer, Point, GeometryFeature){

  ready(function(){

    // create a map widget and place it on the page.
    var map = new Map(&quot;map&quot;);

    // This Paris

    var paris = {
      latitude : 48.866667,
      longitude : 2.333333
    };
    // create a GfxLayer
    var layer = new GfxLayer();
    // create a OpenLayers Point geometry at New York location
    var p = new Point({
      x : paris.longitude,
      y : paris.latitude
    });
    // create a GeometryFeature
    var f = new GeometryFeature(p);
    // create a star graphic
    f.createShape = myCreateShape;
    f.setStroke([ 0, 0, 0 ]);
    f.setFill([ 0, 128, 128 ]);
    // add the feature to the layer
    layer.addFeature(f);
    // add layer to the map
    map.addLayer(layer);
    // fit to Paris with 0.1 degrees extent
    map.fitTo({
      position : [ paris.longitude, paris.latitude ],
      extent : 0.1
    });
  });

  function myCreateShape(s){
    var r1 = 20;
    var r2 = 50;
    var branches = 10;
    var start = 2;
    console.log(&quot;create star &quot; + r1);
    var star = makeStarShape(r1, r2, branches, start);
    var path = s.createPath();
    path.setShape({
      path : star
    });
    return path;
  }

  function makeStarShape(r1, r2, b, start){
    var precision = 2;
    var TPI = Math.PI * 2;
    var di = TPI / b;
    if(!start)
      start = Math.PI;
    var s = null;
    var end = start + TPI;
    for( var i = start; i &lt; end; i += di){
      var c1 = Math.cos(i);
      var s1 = Math.sin(i);
      var i2 = i + di / 2;
      var c2 = Math.cos(i2);
      var s2 = Math.sin(i2);
      if(s == null){
        s = &quot;M&quot; + (s1 * r1).toFixed(precision) + &quot;,&quot; + (c1 * r1).toFixed(precision) + &quot; &quot;;
      }else{
        s += &quot;L&quot; + (s1 * r1).toFixed(precision) + &quot;,&quot; + (c1 * r1).toFixed(precision) + &quot; &quot;;
      }
      s += &quot;L&quot; + (s2 * r2).toFixed(precision) + &quot;,&quot; + (c2 * r2).toFixed(precision) + &quot; &quot;;
    }
    s += &quot;z&quot;;
    return s;
  }
});</textarea></div><p>The styling of the GFX shapes is done through the setFill and setStroke methods of the GeometryFeature class. These fill and stroke parameters are simply passed to the shape at display time and depend on the kind of shape displayed.</p>
<p>The shape can also be configured a with the setShapeProperties method. These properties are passed to the GFX shape object via the setShape method of the GFX shape so the two following code segments are equivalent.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">openlayers</span><span class="p">.</span><span class="nx">GeometryFeature</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
<span class="c1">// create a graphic as a group</span>
<span class="nx">f</span><span class="p">.</span><span class="nx">createShape</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span>
  <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">createPath</span><span class="p">();</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">star</span> <span class="o">=</span> <span class="nx">makeStarShape</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
<span class="nx">f</span><span class="p">.</span><span class="nx">setShapeProperties</span><span class="p">({</span>
 <span class="nx">path</span> <span class="o">:</span> <span class="nx">star</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var f = new dojox.geo.openlayers.GeometryFeature(p);
// create a graphic as a group
f.createShape = function(s){
  return s.createPath();
};
var star = makeStarShape(20, 50, 10, 2);
f.setShapeProperties({
 path : star
});</textarea></div><div class="highlight"><pre><span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">openlayers</span><span class="p">.</span><span class="nx">GeometryFeature</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
<span class="c1">// create a graphic as a group</span>
<span class="nx">f</span><span class="p">.</span><span class="nx">createShape</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">createPath</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">star</span> <span class="o">=</span> <span class="nx">makeStarShape</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
  <span class="nx">path</span><span class="p">.</span><span class="nx">setShape</span><span class="p">({</span>
    <span class="nx">path</span> <span class="o">:</span> <span class="nx">star</span>
  <span class="p">});</span>
  <span class="k">return</span> <span class="nx">path</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var f = new dojox.geo.openlayers.GeometryFeature(p);
// create a graphic as a group
f.createShape = function(s){
  var path = s.createPath();
  var star = makeStarShape(20, 50, 10, 2);
  path.setShape({
    path : star
  });
  return path;
};</textarea></div></div>
<div class="section" id="positioning-widgets-on-the-map">
<h2><a class="toc-backref" href="#id8">Positioning widgets on the map</a><a class="headerlink" href="#positioning-widgets-on-the-map" title="Permalink to this headline">¶</a></h2>
<p>The OpenLayers Map component allows to position dijit widgets on the map. To do that, the widget must be described with a dojox.geo.openlayers.WidgetFeature class. The descriptor of the widget includes the creation method of the widget and the coordinates at which the widget should be positioned. Once created with the widget descriptor, the WidgetFeature has to be added in a layer to be displayed.</p>
<p>The descriptor passed to the Widget feature is an object containing the following fields:</p>
<blockquote>
<div><ul class="simple">
<li>createWidget: Function for widget creation. Must return a <cite>dijit._Widget</cite>.</li>
<li>data-dojo-type: The class of a widget to create;</li>
<li>dijitId: The digitId of an existing widget.</li>
<li>widget: An already created widget.</li>
<li>width: The width of the widget.</li>
<li>height: The height of the widget.</li>
<li>longitude: The longitude, in decimal degrees where to place the widget.</li>
<li>latitude: The latitude, in decimal degrees where to place the widget.</li>
</ul>
</div></blockquote>
<p>Here is an example that shows a pie chart at New York location:</p>
<div class="highlight"><pre><span class="nx">require</span><span class="p">([</span> <span class="s2">&quot;dojo/ready&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/dom-construct&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/_base/window&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dojox/geo/openlayers/Map&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/geo/openlayers/Layer&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dojox/geo/openlayers/WidgetFeature&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/charting/widget/Chart&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dojox/charting/widget/Chart2D&quot;</span><span class="p">,</span> <span class="s2">&quot;dojox/charting/plot2d/Pie&quot;</span><span class="p">,</span>
    <span class="s2">&quot;dojox/charting/themes/PlotKit/blue&quot;</span> <span class="p">],</span>
            <span class="kd">function</span><span class="p">(</span><span class="nx">ready</span><span class="p">,</span> <span class="nx">domConstruct</span><span class="p">,</span> <span class="nx">win</span><span class="p">,</span> <span class="nx">Map</span><span class="p">,</span> <span class="nx">Layer</span><span class="p">,</span> <span class="nx">WidgetFeature</span><span class="p">,</span> <span class="nx">Chart</span><span class="p">,</span> <span class="nx">Chart2D</span><span class="p">,</span> <span class="nx">Pie</span><span class="p">,</span> <span class="nx">blue</span><span class="p">){</span>
  <span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>

    <span class="c1">// create a map widget and place it on the page.</span>
    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Map</span><span class="p">(</span><span class="s2">&quot;map&quot;</span><span class="p">);</span>

    <span class="c1">// This is New York</span>
    <span class="kd">var</span> <span class="nx">ny</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">latitude</span> <span class="o">:</span> <span class="mf">40.71427</span><span class="p">,</span>
      <span class="nx">longitude</span> <span class="o">:</span> <span class="o">-</span><span class="mf">74.00597</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">div</span> <span class="o">=</span> <span class="nx">domConstruct</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="p">{},</span> <span class="nx">win</span><span class="p">.</span><span class="nx">body</span><span class="p">());</span>
    <span class="kd">var</span> <span class="nx">chart</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Chart</span><span class="p">({</span>
      <span class="nx">margins</span> <span class="o">:</span> <span class="p">{</span>
        <span class="nx">l</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">r</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">t</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">b</span> <span class="o">:</span> <span class="mi">0</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="nx">div</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">chart</span><span class="p">.</span><span class="nx">chart</span><span class="p">;</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">addPlot</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">,</span> <span class="p">{</span>
      <span class="nx">type</span> <span class="o">:</span> <span class="s2">&quot;Pie&quot;</span><span class="p">,</span>
      <span class="nx">radius</span> <span class="o">:</span> <span class="mi">50</span><span class="p">,</span>
      <span class="nx">labelOffset</span> <span class="o">:</span> <span class="mi">100</span><span class="p">,</span>
      <span class="nx">fontColor</span> <span class="o">:</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
      <span class="nx">fontSize</span> <span class="o">:</span> <span class="mi">20</span>
    <span class="p">});</span>

    <span class="kd">var</span> <span class="nx">ser</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">3</span> <span class="p">];</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">addSeries</span><span class="p">(</span><span class="s2">&quot;Series&quot;</span><span class="p">,</span> <span class="nx">ser</span><span class="p">);</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">setTheme</span><span class="p">(</span><span class="nx">blue</span><span class="p">);</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">theme</span><span class="p">.</span><span class="nx">plotarea</span><span class="p">.</span><span class="nx">fill</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">descr</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">longitude</span> <span class="o">:</span> <span class="nx">ny</span><span class="p">.</span><span class="nx">longitude</span><span class="p">,</span>
      <span class="nx">latitude</span> <span class="o">:</span> <span class="nx">ny</span><span class="p">.</span><span class="nx">latitude</span><span class="p">,</span>
      <span class="nx">widget</span> <span class="o">:</span> <span class="nx">chart</span><span class="p">,</span>
      <span class="nx">width</span> <span class="o">:</span> <span class="mi">120</span><span class="p">,</span>
      <span class="nx">height</span> <span class="o">:</span> <span class="mi">120</span>
    <span class="p">};</span>
    <span class="nx">feature</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">WidgetFeature</span><span class="p">(</span><span class="nx">descr</span><span class="p">);</span>

    <span class="nx">layer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Layer</span><span class="p">();</span>
    <span class="nx">layer</span><span class="p">.</span><span class="nx">addFeature</span><span class="p">(</span><span class="nx">feature</span><span class="p">);</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">layer</span><span class="p">);</span>
    <span class="c1">// fit to New York with 0.1 degrees extent</span>
    <span class="nx">map</span><span class="p">.</span><span class="nx">fitTo</span><span class="p">({</span>
      <span class="nx">position</span> <span class="o">:</span> <span class="p">[</span> <span class="nx">ny</span><span class="p">.</span><span class="nx">longitude</span><span class="p">,</span> <span class="nx">ny</span><span class="p">.</span><span class="nx">latitude</span> <span class="p">],</span>
      <span class="nx">extent</span> <span class="o">:</span> <span class="mf">0.1</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">require([ &quot;dojo/ready&quot;, &quot;dojo/dom-construct&quot;, &quot;dojo/_base/window&quot;,
    &quot;dojox/geo/openlayers/Map&quot;, &quot;dojox/geo/openlayers/Layer&quot;,
    &quot;dojox/geo/openlayers/WidgetFeature&quot;, &quot;dojox/charting/widget/Chart&quot;,
    &quot;dojox/charting/widget/Chart2D&quot;, &quot;dojox/charting/plot2d/Pie&quot;,
    &quot;dojox/charting/themes/PlotKit/blue&quot; ],
            function(ready, domConstruct, win, Map, Layer, WidgetFeature, Chart, Chart2D, Pie, blue){
  ready(function(){

    // create a map widget and place it on the page.
    var map = new Map(&quot;map&quot;);

    // This is New York
    var ny = {
      latitude : 40.71427,
      longitude : -74.00597
    };

    var div = domConstruct.create(&quot;div&quot;, {}, win.body());
    var chart = new Chart({
      margins : {
        l : 0,
        r : 0,
        t : 0,
        b : 0
      }
    }, div);
    var c = chart.chart;
    c.addPlot(&quot;default&quot;, {
      type : &quot;Pie&quot;,
      radius : 50,
      labelOffset : 100,
      fontColor : &quot;black&quot;,
      fontSize : 20
    });

    var ser = [ 2, 8, 12, 3 ];
    c.addSeries(&quot;Series&quot;, ser);
    c.setTheme(blue);
    c.render();
    c.theme.plotarea.fill = undefined;

    var descr = {
      longitude : ny.longitude,
      latitude : ny.latitude,
      widget : chart,
      width : 120,
      height : 120
    };
    feature = new WidgetFeature(descr);

    layer = new Layer();
    layer.addFeature(feature);
    map.addLayer(layer);
    // fit to New York with 0.1 degrees extent
    map.fitTo({
      position : [ ny.longitude, ny.latitude ],
      extent : 0.1
    });
  });
});</textarea></div></div>
</div>


      </div>
    </div>
      <div class="clearer"></div>
    </div>

  <div class="row">
    <div class="medium-9 columns offset-3">
        <a href="https://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=dFlDcHEyaHMwbEd4MFBObkNrX0E1MFE6MQ&entry_0=http%3A%2F%2Fdojotoolkit.org%2Freference-guide%2F1.10%2F">Error in the documentation? Can’t find what you are looking for? Let us know!</a>
        <div class="footer">
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-22088032-1', 'auto');
		ga('send', 'pageview');

	</script>
</div>
    </div>
  </div>
  
  </body>
</html>