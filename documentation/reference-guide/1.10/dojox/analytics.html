<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojox.analytics &mdash; The Dojo Toolkit - Reference Guide</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.10.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>

    <link rel="stylesheet" href="/css/guide.css">
    <script type="text/javascript">
      dojoConfig = {
        async: true
      };
    </script>
    <script src="/scripts/dojo/dojo/dojo.js"></script>
    <script src="/scripts/guide/docs/guide.js"></script>
    <link rel="stylesheet" href="/scripts/dojo/dijit/themes/claro/claro.css">

  </head>
  <body role="document">
  

    <div class="document">

  <div class="nav">
	<div class="row">
		<div class="small-3 columns">
			<a href="/" class="navLogo"><span>Dojo</span></a>
		</div>
		<div class="small-9 columns text-right">
			<div class="mobileMenuToggle" data-menu-toggle></div>
			<div class="menu">
				<div class="mobileHeader">Menu</div>
				<ul class="inline-list menuItems right">
					<li><a href="">Get Dojo</a></li>
					<li><a href="/documentation/">Docs</a></li>
					<li><a href="">Help &amp; Support</a></li>
					<li><a href="">Blog</a></li>
					<li><a href="">Get Involved</a></li>
				</ul>
			</div>
		</div>
	</div>
</div>
  <main class="refguide">
    <div class="row">

      <div class="medium-3 columns sideNav">
        <h4>Reference Guide</h4>
        <div id="dtkVersion">
          <label for="refver">Dojo Version</label>
          <select id="refver" name="refver">
            <option value="1.6">1.6</option>
            <option value="1.7">1.7</option>
            <option value="1.8">1.8</option>
            <option value="1.9">1.9</option>
            <option value="1.10" selected="selected">1.10</option>
          </select>
        </div>
        <ul>
          <li><a href="../index.html">Startpage</a></li>
          <li><a href="../dojo/index.html">Dojo</a></li>
          <li><a href="../dijit/index.html">Dijit</a></li>
          <li><a href="index.html">DojoX</a></li>
        </ul>
        <ul>
<li><a class="reference internal" href="#">dojox.analytics</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#available-dojoconfig-options">Available dojoConfig Options</a><ul>
<li><a class="reference internal" href="#base">Base</a></li>
<li><a class="reference internal" href="#consolemessages">consoleMessages</a></li>
<li><a class="reference internal" href="#idle">idle</a></li>
<li><a class="reference internal" href="#mouseover">mouseOver</a></li>
<li><a class="reference internal" href="#window">window</a></li>
</ul>
</li>
<li><a class="reference internal" href="#declaring-an-analytics-plugin">Declaring an Analytics Plugin</a></li>
<li><a class="reference internal" href="#see-also">See also</a></li>
</ul>
</li>
</ul>

        

            <div id="searchbox" style="display: none">
                <h3>Quick search</h3>
                <form class="search" action="../search.html" method="get">
                    <input type="text" name="q" size="18" />
                    <input type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                 </form>
                 <p class="searchtip" style="font-size: 90%">
                     Enter search terms or a module, class or function name.
                 </p>
            </div>
      </div>
      <div class="medium-9 columns content">
        
  <div class="section" id="dojox-analytics">
<span id="id1"></span><h1><a class="toc-backref" href="#id2">dojox.analytics</a><a class="headerlink" href="#dojox-analytics" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Project owner:</th><td class="field-body">Dustin Machi</td>
</tr>
<tr class="field-even field"><th class="field-name">since:</th><td class="field-body">1.1</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#dojox-analytics" id="id2">dojox.analytics</a><ul>
<li><a class="reference internal" href="#introduction" id="id3">Introduction</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
<li><a class="reference internal" href="#available-dojoconfig-options" id="id5">Available dojoConfig Options</a></li>
<li><a class="reference internal" href="#declaring-an-analytics-plugin" id="id6">Declaring an Analytics Plugin</a></li>
<li><a class="reference internal" href="#see-also" id="id7">See also</a></li>
</ul>
</li>
</ul>
</div>
<p>Analytics is an analytic and client monitoring system. Including the base analytics system and any number of plugins enables logging of different system data back to the server.</p>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id3">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Plugins included at this time:</p>
<ul class="simple">
<li>dojo - reports dojo startup  collected information</li>
<li>window - reports available window information to the server</li>
<li>mouseOver - allows periodic sampling of mouseOver</li>
<li>mouseClick - reports any mouse clicks to the server</li>
<li>idle - reports idle/activity</li>
<li>consoleMessages - reports console.* messages to the server</li>
</ul>
<p>Additionally, a <a class="reference internal" href="analytics/Urchin.html#dojox-analytics-urchin"><span>Google Analytics</span></a> (Urchin tracker) helper is included in this project, though is unrelated to the Core dojox.analytics project code.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Usage of the core analytics system is simple.  At its base it is simply a logger for pushing data off to the server without interfering with the normal operation of the page.  There are a number of dojoConfig options that will affect the overall behavior of the core system, and others that apply only to specific analytics plugins.  After a normal dojo.js include with the appropriate dojoConfig settings, all that needs to be done is to require the analytics module and any of the plugins you wish to use.  In practice, it is better to create a custom base build of dojo that includes the analytics component and any modules you want to use for your pages.  This will minimally increase the size of your dojo.js (Only a few K depending on which/how many modules you enable), but will be available immediately and can easily be added/removed from your overall code base by simply using dojo.js or AnalyticsDojo.js at your leisure.</div></blockquote>
<div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;dojotoolkit/dojo/dojo.js&quot;</span>
   <span class="na">data-dojo-config=</span><span class="s">&quot;parseOnLoad: true, sendInterval: 5000, analyticsUrl: &#39;http://server/path/to/dataLogger&#39;&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>

<span class="nt">&lt;script </span><span class="na">language=</span><span class="s">&quot;JavaScript&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
   <span class="c1">// include the analytics system</span>
   <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dojox.analytics&quot;</span><span class="p">);</span>

   <span class="c1">// this plugin returns the information dojo collects when it launches</span>
   <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dojox.analytics.plugins.dojo&quot;</span><span class="p">);</span>

   <span class="c1">// this plugin return the information the window has when it launches</span>
   <span class="c1">// and it also ties to a few events such as window.option</span>
   <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dojox.analytics.plugins.window&quot;</span><span class="p">);</span>

   <span class="c1">// this plugin tracks console. message, It logs console.error, warn, and</span>
   <span class="c1">// info messages to the tracker.  It also defines console.rlog() which</span>
   <span class="c1">// can be used to log only to the server.  Note that if isDebug() is disabled</span>
   <span class="c1">// you will still see the console messages on the sever, but not in the actual</span>
   <span class="c1">// browser console.</span>
   <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dojox.analytics.plugins.consoleMessages&quot;</span><span class="p">);</span>

   <span class="c1">// tracks where a mouse is on a page an what it is over, periodically sampling</span>
   <span class="c1">// and storing this data</span>
   <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dojox.analytics.plugins.mouseOver&quot;</span><span class="p">);</span>

   <span class="c1">// tracks mouse clicks on the page</span>
   <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dojox.analytics.plugins.mouseClick&quot;</span><span class="p">);</span>

   <span class="c1">// tracks when the user has gone idle</span>
   <span class="nx">dojo</span><span class="p">.</span><span class="nx">require</span><span class="p">(</span><span class="s2">&quot;dojox.analytics.plugins.idle&quot;</span><span class="p">);</span>

 <span class="nt">&lt;/script&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="html"><textarea style="display:none">&lt;script type=&quot;text/javascript&quot; src=&quot;dojotoolkit/dojo/dojo.js&quot;
   data-dojo-config=&quot;parseOnLoad: true, sendInterval: 5000, analyticsUrl: 'http://server/path/to/dataLogger'&quot;&gt;&lt;/script&gt;

&lt;script language=&quot;JavaScript&quot; type=&quot;text/javascript&quot;&gt;
   // include the analytics system
   dojo.require(&quot;dojox.analytics&quot;);

   // this plugin returns the information dojo collects when it launches
   dojo.require(&quot;dojox.analytics.plugins.dojo&quot;);

   // this plugin return the information the window has when it launches
   // and it also ties to a few events such as window.option
   dojo.require(&quot;dojox.analytics.plugins.window&quot;);

   // this plugin tracks console. message, It logs console.error, warn, and
   // info messages to the tracker.  It also defines console.rlog() which
   // can be used to log only to the server.  Note that if isDebug() is disabled
   // you will still see the console messages on the sever, but not in the actual
   // browser console.
   dojo.require(&quot;dojox.analytics.plugins.consoleMessages&quot;);

   // tracks where a mouse is on a page an what it is over, periodically sampling
   // and storing this data
   dojo.require(&quot;dojox.analytics.plugins.mouseOver&quot;);

   // tracks mouse clicks on the page
   dojo.require(&quot;dojox.analytics.plugins.mouseClick&quot;);

   // tracks when the user has gone idle
   dojo.require(&quot;dojox.analytics.plugins.idle&quot;);

 &lt;/script&gt;</textarea></div></div>
<div class="section" id="available-dojoconfig-options">
<h2><a class="toc-backref" href="#id5">Available dojoConfig Options</a><a class="headerlink" href="#available-dojoconfig-options" title="Permalink to this headline">¶</a></h2>
<div class="section" id="base">
<h3>Base<a class="headerlink" href="#base" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>sendInterval - The time between posts of new data to the server. Data will be queued and then sent off when the interval has passed. Defaults to 5000 ms</li>
<li>inTransitRetry - If the interval has passed and the client already has an in progress transmission, the client will back off this amount of time. Defaults to 200ms</li>
<li>analyticsUrl - The url you wish to send the data logs to</li>
<li>sendMode - The method by which data is sent to the server. &#8220;xhrPost&#8221;(default) or &#8220;script&#8221; for x-domain delivery.</li>
<li>maxRequestSize - Limit the size of messages to this length.  Defaults to 2000 for IE and 4000 otherwise.  This is need to limit the size of urls in the script use case</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="consolemessages">
<h3>consoleMessages<a class="headerlink" href="#consolemessages" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>consoleLogFuncs - array of console functions you want to be logged to the server.  Defaults to [&#8220;error&#8221;, &#8220;warn&#8221;, &#8220;info&#8221;, &#8220;rlog&#8221;].  Note that you can place arbitrary names in this list, and if that function doesn&#8217;t exist it will become available to your console object.  For example, console.rlog(&#8220;foo&#8221;) will be sent to the server in this case.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="idle">
<h3>idle<a class="headerlink" href="#idle" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>idleTime - Time after which the user will be considered idle. Defaults to 60000 ms.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="mouseover">
<h3>mouseOver<a class="headerlink" href="#mouseover" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>sampleDelay - Time between mouseover samples, defaults to 2500ms</li>
<li>targetProps - The even properties we want to save from a &#8216;sample&#8217;. Defaults to id, className, localName, href, spellcheck, lang, textContent, value</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="window">
<h3>window<a class="headerlink" href="#window" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>windowConnects - Defines global functions that the analytics system will connect to and log use of. Defaults to &#8220;open&#8221; and &#8220;onerror&#8221;</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="declaring-an-analytics-plugin">
<h2><a class="toc-backref" href="#id6">Declaring an Analytics Plugin</a><a class="headerlink" href="#declaring-an-analytics-plugin" title="Permalink to this headline">¶</a></h2>
<p>An analytics plugin is simply a function that takes advantage of the base analytics logger.  There is only one method of substance, and that is the &#8220;addData&#8221; method of dojox.analytics (base).  A module will typically create its own addData method which is hitched to the base addData, like this:</p>
<div class="highlight"><pre><span class="nx">myPlugin</span> <span class="o">=</span> <span class="k">new</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
 <span class="k">this</span><span class="p">.</span><span class="nx">addData</span> <span class="o">=</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">hitch</span><span class="p">(</span><span class="nx">dojox</span><span class="p">.</span><span class="nx">analytics</span><span class="p">,</span> <span class="s2">&quot;addData&quot;</span><span class="p">,</span> <span class="s2">&quot;myPlugin&quot;</span><span class="p">)</span>
<span class="p">})();</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">myPlugin = new (function(){
 this.addData = dojo.hitch(dojox.analytics, &quot;addData&quot;, &quot;myPlugin&quot;)
})();</textarea></div><p>Subsequently, the function can connect to an event or do some other function that will trigger its addData to be called.  Each &#8220;entry&#8221; in the logs will then contain [&#8220;myPlugin&#8221;, passedData].</p>
</div>
<div class="section" id="see-also">
<h2><a class="toc-backref" href="#id7">See also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://www.sitepen.com/blog/2008/03/13/analyze-your-code-errors-interface-and-marketing-effectiveness-with-dojoxanalytics/">http://www.sitepen.com/blog/2008/03/13/analyze-your-code-errors-interface-and-marketing-effectiveness-with-dojoxanalytics/</a></li>
</ul>
</div>
</div>


      </div>
    </div>
      <div class="clearer"></div>
    </div>

  <div class="row">
    <div class="medium-9 columns offset-3">
        <a href="https://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=dFlDcHEyaHMwbEd4MFBObkNrX0E1MFE6MQ&entry_0=http%3A%2F%2Fdojotoolkit.org%2Freference-guide%2F1.10%2F">Error in the documentation? Can’t find what you are looking for? Let us know!</a>
        <div class="footer">
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-22088032-1', 'auto');
		ga('send', 'pageview');

	</script>
</div>
    </div>
  </div>
  
  </body>
</html>