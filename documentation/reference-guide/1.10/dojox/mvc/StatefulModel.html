<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>dojox.mvc.StatefulModel &mdash; The Dojo Toolkit - Reference Guide</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.10.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>

    <link rel="stylesheet" href="/css/guide.css">
    <script type="text/javascript">
      dojoConfig = {
        async: true
      };
    </script>
    <script src="/scripts/dojo/dojo/dojo.js"></script>
    <script src="/scripts/guide/docs/guide.js"></script>
    <link rel="stylesheet" href="/scripts/dojo/dijit/themes/claro/claro.css">

  </head>
  <body role="document">
  

    <div class="document">

  <div class="nav">
	<div class="row">
		<div class="small-3 columns">
			<a href="/" class="navLogo"><span>Dojo</span></a>
		</div>
		<div class="small-9 columns text-right">
			<div class="mobileMenuToggle" data-menu-toggle></div>
			<div class="menu">
				<div class="mobileHeader">Menu</div>
				<ul class="inline-list menuItems right">
					<li><a href="">Get Dojo</a></li>
					<li><a href="/documentation/">Docs</a></li>
					<li><a href="">Help &amp; Support</a></li>
					<li><a href="">Blog</a></li>
					<li><a href="">Get Involved</a></li>
				</ul>
			</div>
		</div>
	</div>
</div>
  <main class="refguide">
    <div class="row">

      <div class="medium-3 columns sideNav">
        <h4>Reference Guide</h4>
        <div id="dtkVersion">
          <label for="refver">Dojo Version</label>
          <select id="refver" name="refver">
            <option value="1.6">1.6</option>
            <option value="1.7">1.7</option>
            <option value="1.8">1.8</option>
            <option value="1.9">1.9</option>
            <option value="1.10" selected="selected">1.10</option>
          </select>
        </div>
        <ul>
          <li><a href="../../index.html">Startpage</a></li>
          <li><a href="../../dojo/index.html">Dojo</a></li>
          <li><a href="../../dijit/index.html">Dijit</a></li>
          <li><a href="../index.html">DojoX</a></li>
        </ul>
        <ul>
<li><a class="reference internal" href="#">dojox.mvc.StatefulModel</a><ul>
<li><a class="reference internal" href="#constructor-parameters">Constructor Parameters</a></li>
<li><a class="reference internal" href="#available-members">Available Members</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
</ul>
</li>
</ul>

        

            <div id="searchbox" style="display: none">
                <h3>Quick search</h3>
                <form class="search" action="../../search.html" method="get">
                    <input type="text" name="q" size="18" />
                    <input type="submit" value="Go" />
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                 </form>
                 <p class="searchtip" style="font-size: 90%">
                     Enter search terms or a module, class or function name.
                 </p>
            </div>
      </div>
      <div class="medium-9 columns content">
        
  <div class="section" id="dojox-mvc-statefulmodel">
<span id="id1"></span><h1><a class="toc-backref" href="#id2">dojox.mvc.StatefulModel</a><a class="headerlink" href="#dojox-mvc-statefulmodel" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Authors:</th><td class="field-body">Rahul Akolkar, Ed Chatelain</td>
</tr>
<tr class="field-even field"><th class="field-name">Developers:</th><td class="field-body">Rahul Akolkar, Ed Chatelain</td>
</tr>
<tr class="field-odd field"><th class="field-name">since:</th><td class="field-body">V1.7</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#dojox-mvc-statefulmodel" id="id2">dojox.mvc.StatefulModel</a><ul>
<li><a class="reference internal" href="#constructor-parameters" id="id3">Constructor Parameters</a></li>
<li><a class="reference internal" href="#available-members" id="id4">Available Members</a></li>
<li><a class="reference internal" href="#usage" id="id5">Usage</a></li>
</ul>
</li>
</ul>
</div>
<p><em>Deprecated</em>. The first-class native JavaScript data model based on dojo.Stateful that wraps any data structure(s) that may be relevant for a view, a view portion, a dijit or any custom view layer component.</p>
<div class="section" id="constructor-parameters">
<h2><a class="toc-backref" href="#id3">Constructor Parameters</a><a class="headerlink" href="#constructor-parameters" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="6%" />
<col width="14%" />
<col width="72%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Parameter</td>
<td>Type</td>
<td>Default</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>data</td>
<td>Object</td>
<td>&nbsp;</td>
<td>The plain JavaScript object / data structure used to initialize this model. At any point in time, it
holds the lasted saved model state.  Either data or store property must be provided.</td>
</tr>
<tr class="row-odd"><td>store</td>
<td>DataStore</td>
<td>&nbsp;</td>
<td>The data store from where to retrieve initial data for this model. An optional query may also be
provided along with this store. Either data or store property must be provided.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="available-members">
<h2><a class="toc-backref" href="#id4">Available Members</a><a class="headerlink" href="#available-members" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>StatefulModel.valid</li>
</ul>
<p>Whether this model deems the associated data to be valid.</p>
<ul class="simple">
<li>StatefulModel.value</li>
</ul>
<p>The associated value (if this is a leaf node). The value of intermediate nodes in the model is not defined.</p>
<ul class="simple">
<li>StatefulModel.reset()</li>
</ul>
<p>Resets this data model&#8217;s values to its original state. Structural changes to the data model (such as adds or removes) are not restored.</p>
<ul class="simple">
<li>StatefulModel.commit()</li>
</ul>
<p>Commits this data model:
Saves the current state such that a subsequent reset will not undo any prior changes.
Persists client-side changes to the data store, if a store has been supplied as a parameter or at instantiation.</p>
<ul class="simple">
<li>StatefulModel.toPlainObject()</li>
</ul>
<p>Produces and returns a plain JavaScript object representation of the data
currently within this data model.</p>
<ul class="simple">
<li>StatefulModel.add(name, Stateful)</li>
</ul>
<p>Adds the dojo.Stateful tree represented by the given dojox.mvc.StatefulModel at the given property name. In case of arrays, the property names are indices passed as Strings. An addition of such a dojo.Stateful node results in right-shifting any trailing sibling nodes.</p>
<ul class="simple">
<li>StatefulModel.remove(name)</li>
</ul>
<p>Removes the dojo.Stateful tree at the given property name. In case of arrays, the property names are indices passed as Strings. A removal of such a dojo.Stateful node results in left-shifting any trailing sibling nodes.</p>
<ul class="simple">
<li>StatefulModel.valueOf()</li>
</ul>
<p>Returns the value representation of the data currently within this data model</p>
<ul class="simple">
<li>StatefulModel.toString()</li>
</ul>
<p>Returns the string representation of the data currently within this data model.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id5">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>A data model is effectively instantiated with a plain JavaScript object which specifies the initial data structure for the model.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">struct</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">order</span><span class="o">:</span> <span class="s2">&quot;abc123&quot;</span><span class="p">,</span>
    <span class="nx">shipto</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">address</span><span class="o">:</span> <span class="s2">&quot;123 Example St, New York, NY&quot;</span><span class="p">,</span>
        <span class="nx">phone</span><span class="o">:</span> <span class="s2">&quot;212-000-0000&quot;</span>
    <span class="p">},</span>
    <span class="nx">items</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span> <span class="nx">part</span><span class="o">:</span> <span class="s2">&quot;x12345&quot;</span><span class="p">,</span> <span class="nx">num</span> <span class="o">:</span> <span class="mi">1</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nx">part</span><span class="o">:</span> <span class="s2">&quot;n09876&quot;</span><span class="p">,</span> <span class="nx">num</span> <span class="o">:</span> <span class="mi">3</span> <span class="p">}</span>
    <span class="p">]</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">mvc</span><span class="p">.</span><span class="nx">newStatefulModel</span><span class="p">({</span> <span class="nx">data</span> <span class="o">:</span> <span class="nx">struct</span> <span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var struct = {
    order: &quot;abc123&quot;,
    shipto: {
        address: &quot;123 Example St, New York, NY&quot;,
        phone: &quot;212-000-0000&quot;
    },
    items: [
        { part: &quot;x12345&quot;, num : 1 },
        { part: &quot;n09876&quot;, num : 3 }
    ]
};

var model = dojox.mvc.newStatefulModel({ data : struct });</textarea></div><p>The simple example above shows an inline plain JavaScript object illustrating the data structure to prime the model with, however the underlying data may be made available by other means, such as from the results of a dojo.store or dojo.data query.</p>
<p>To deal with stores providing immediate values or Promises, a factory method for model instantiation is provided. This method will either return an immediate model or a model Promise depending on the nature of the store.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">mvc</span><span class="p">.</span><span class="nx">newStatefulModel</span><span class="p">({</span> <span class="nx">store</span><span class="o">:</span> <span class="nx">someStore</span> <span class="p">});</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var model = dojox.mvc.newStatefulModel({ store: someStore });</textarea></div><p>The created data model has the following properties:</p>
<ul class="simple">
<li>It enables dijits or custom components in the view to &#8220;bind&#8221; to data within the model. A bind creates a bi-directional update mechanism between the bound view and the underlying data:</li>
<li>The data model is &#8220;live&#8221; data i.e. it maintains any updates driven by the view on the underlying data.</li>
<li>The data model issues updates to portions of the view if the data they bind to is updated in the model. For example, if two dijits are bound to the same part of a data model, updating the value of one in the view will cause the data model to issue an update to the other containing the new value.</li>
<li>The data model internally creates a tree of dojo.Stateful objects that matches the input, which is effectively a plain JavaScript object i.e. &#8220;pure data&#8221;. This tree allows dijits or other view components to bind to any node within the data model. Typically, dijits with simple values bind to leaf nodes of the datamodel, whereas containers bind to internal nodes of the datamodel. For example, a datamodel created using the object below will generate the dojo.Stateful tree as shown:</li>
</ul>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">mvc</span><span class="p">.</span><span class="nx">newStatefulModel</span><span class="p">({</span> <span class="nx">data</span> <span class="o">:</span> <span class="p">{</span>
    <span class="nx">prop1</span><span class="o">:</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span>
    <span class="nx">prop2</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">leaf1</span><span class="o">:</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span>
        <span class="nx">leaf2</span><span class="o">:</span> <span class="s2">&quot;baz&quot;</span>
    <span class="p">}</span>
<span class="p">}});</span>

<span class="c1">// The created dojo.Stateful tree is illustrated below (all nodes are dojo.Stateful objects)</span>
<span class="c1">//</span>
<span class="c1">//                  o  (root node)</span>
<span class="c1">//                 / \</span>
<span class="c1">//   (prop1 node) o   o (prop2 node)</span>
<span class="c1">//               / \</span>
<span class="c1">// (leaf1 node) o   o (leaf2 node)</span>
<span class="c1">//</span>
<span class="c1">// The root node is accessed using the expression &quot;model&quot; (the var name above). The prop1</span>
<span class="c1">// node is accessed using the expression &quot;model.prop1&quot;, the leaf2 node is accessed using</span>
<span class="c1">// the expression &quot;model.prop2.leaf2&quot; and so on.</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">var model = dojox.mvc.newStatefulModel({ data : {
    prop1: &quot;foo&quot;,
    prop2: {
        leaf1: &quot;bar&quot;,
        leaf2: &quot;baz&quot;
    }
}});

// The created dojo.Stateful tree is illustrated below (all nodes are dojo.Stateful objects)
//
//                  o  (root node)
//                 / \
//   (prop1 node) o   o (prop2 node)
//               / \
// (leaf1 node) o   o (leaf2 node)
//
// The root node is accessed using the expression &quot;model&quot; (the var name above). The prop1
// node is accessed using the expression &quot;model.prop1&quot;, the leaf2 node is accessed using
// the expression &quot;model.prop2.leaf2&quot; and so on.</textarea></div><ul class="simple">
<li>Each of the dojo.Stateful nodes in the model may store data as well as associated &#8220;meta-data&#8221;, which includes things such as whether the data is required or readOnly etc. This meta-data differs from that maintained by, for example, an individual dijit in that this is maintained by the datamodel and may therefore be affected by datamodel-level constraints that span multiple dijits or even additional criteria such as server-side computations.</li>
<li>When the model is backed by a dojo.store or dojo.data query, the client-side updates can be persisted once the client is ready to &#8220;submit&#8221; the changes (which may include both value changes or structural changes - adds/deletes). The datamodel allows control over when the underlying data is persisted i.e. this can be more incremental or batched per application needs.</li>
</ul>
<p>There need not be a one-to-one association between a datamodel and a view or portion thereof. For example, multiple datamodels may back the dijits in a view. Indeed, this may be useful where the binding data comes from a number of data sources or queries, for example. Just as well, dijits from multiple portions of the view may be bound to a single datamodel.</p>
<p>Finally, requiring this class also enables all dijits to become data binding aware. The data binding is commonly specified declaratively via the &#8220;ref&#8221; property in the &#8220;data-dojo-props&#8221; attribute value.</p>
<p>To illustrate, the following is the &#8220;Hello World&#8221; of such data-bound widget examples.</p>
<div class="highlight"><pre>    <span class="kd">var</span> <span class="nx">model</span><span class="p">;</span>
    <span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojox/mvc&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/parser&quot;</span><span class="p">,</span> <span class="s2">&quot;dijit/form/TextBox&quot;</span><span class="p">,</span> <span class="s2">&quot;dojo/domReady!&quot;</span><span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">dxmvc</span><span class="p">,</span> <span class="nx">parser</span><span class="p">){</span>
        <span class="nx">model</span> <span class="o">=</span> <span class="nx">dojox</span><span class="p">.</span><span class="nx">mvc</span><span class="p">.</span><span class="nx">newStatefulModel</span><span class="p">({</span> <span class="nx">data</span> <span class="o">:</span> <span class="p">{</span>
            <span class="nx">hello</span> <span class="o">:</span> <span class="s2">&quot;Hello World&quot;</span>
        <span class="p">}});</span>
        <span class="nx">parser</span><span class="p">.</span><span class="nx">parse</span><span class="p">();</span>
    <span class="p">});</span>

<span class="o">&lt;</span><span class="nx">input</span> <span class="nx">id</span><span class="o">=</span><span class="s2">&quot;helloInput&quot;</span> <span class="nx">data</span><span class="o">-</span><span class="nx">dojo</span><span class="o">-</span><span class="nx">type</span><span class="o">=</span><span class="s2">&quot;dijit.form.TextBox&quot;</span>
    <span class="nx">data</span><span class="o">-</span><span class="nx">dojo</span><span class="o">-</span><span class="nx">props</span><span class="o">=</span><span class="s2">&quot;ref: &#39;model.hello&#39;&quot;</span><span class="o">&gt;</span>
</pre></div>
<div class="CodeGlassMiniRaw" label="" lang="javascript"><textarea style="display:none">    var model;
    require([&quot;dojox/mvc&quot;, &quot;dojo/parser&quot;, &quot;dijit/form/TextBox&quot;, &quot;dojo/domReady!&quot;], function(dxmvc, parser){
        model = dojox.mvc.newStatefulModel({ data : {
            hello : &quot;Hello World&quot;
        }});
        parser.parse();
    });

&lt;input id=&quot;helloInput&quot; data-dojo-type=&quot;dijit.form.TextBox&quot;
    data-dojo-props=&quot;ref: 'model.hello'&quot;&gt;</textarea></div><p>Such data binding awareness for dijits is added by extending the dijit._WidgetBase class to include data binding capabilities provided by dojox.mvc._DataBindingMixin, and this class declares a dependency on dojox.mvc._DataBindingMixin.</p>
<p>The presence of a data model and the data-binding capabilities outlined above support the flexible development of a number of MVC patterns on the client. As an example, CRUD operations can be supported with minimal application code.</p>
</div>
</div>


      </div>
    </div>
      <div class="clearer"></div>
    </div>

  <div class="row">
    <div class="medium-9 columns offset-3">
        <a href="https://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=dFlDcHEyaHMwbEd4MFBObkNrX0E1MFE6MQ&entry_0=http%3A%2F%2Fdojotoolkit.org%2Freference-guide%2F1.10%2F">Error in the documentation? Can’t find what you are looking for? Let us know!</a>
        <div class="footer">
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-22088032-1', 'auto');
		ga('send', 'pageview');

	</script>
</div>
    </div>
  </div>
  
  </body>
</html>